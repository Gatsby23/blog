GEN   = ../_gen.sh
BIB   = ../_bib.sh
IDX   = ./_index.sh
IDX2  = ./_index2.sh
PIDIR = .
PODIR = ../publish
IDXPG = $(PODIR)/index.html
IDXPG2= $(PODIR)/index2.html
IDXMD = _index_header.md _index_footer.md

CURFILES = \
post-0078-learning-perl.md \
post-0073-opencv-notes.md \
post-0068-cxx-gui-programming-with-qt4.md \
post-0074-qt-design-patterns.md \
post-0072-cvann-mlp.md \
post-0048-low-poly-in-practice.md \
post-0069-gis-spatial-analysis-application-modeling.md \
post-0025-doc-bridge-texture.md \
post-0055-writing-guide-to-hackers.md \
post-0057-code-on-windows.md \

# :r!ls post* | tail -n 5 | sort -nr

POST_0085 = $(PODIR)/post-0085-cvrs-presentation.html
POST_0084 = $(PODIR)/post-0084-complex-network-notes.html
#POST_0083 = $(PODIR)/post-0082-whu-mooc-academic-integrity.html
POST_0082 = $(PODIR)/post-0082-whu-mooc-academic-integrity.html
POST_0081 = $(PODIR)/post-0081-learning-jquery.html
# POST_0080 = $(PODIR)/post-0080-apprenticeship.html
POST_0079 = $(PODIR)/post-0079-lingoes-dict.html
# POST_0078 = $(PODIR)/post-0078-learning-perl.html
POST_0077 = $(PODIR)/post-0077-wavelet-transform.html
POST_0076 = $(PODIR)/post-0076-real-hacker.html
POST_0075 = $(PODIR)/post-0075-what-is-projection.html
# POST_0074 = $(PODIR)/post-0074-qt-design-patterns.html
# POST_0073 = $(PODIR)/post-0073-opencv-notes.html
POST_0072 = $(PODIR)/post-0072-cvann-mlp.html
# POST_0071 = $(PODIR)/post-0071-selected-qt-code.html

POST_0070 = $(PODIR)/post-0070-some-vim-rules.html
POST_0069 = $(PODIR)/post-0069-gis-spatial-analysis-application-modeling.html
POST_0068 = $(PODIR)/post-0068-cxx-gui-programming-with-qt4.html
# POST_0067 = $(PODIR)/post-0067-learn-c-in-project.md
# POST_0066 = $(PODIR)/post-0066-about-encoding.html
# POST_0065 = $(PODIR)/post-0065-get-things-done.html
# POST_0064 = $(PODIR)/post-0064-rm-pitfall.html
# POST_0063 = $(PODIR)/post-0063-stackoverflow.html
POST_0062 = $(PODIR)/post-0062-pretty-diff.html
POST_0061 = $(PODIR)/post-0061-liuhaiyang-example-code.html

POST_0060 = $(PODIR)/post-0060-coding-style.html
POST_0059 = $(PODIR)/post-0059-exe-wrapper.html
POST_0058 = $(PODIR)/post-0058-script-boy.html
# POST_0057 = $(PODIR)/post-0057-code-on-windows.html
POST_0056 = $(PODIR)/post-0056-lms-chunk.html
# POST_0055 = $(PODIR)/post-0055-writing-guide-to-hackers.html
POST_0054 = $(PODIR)/post-0054-get-things-done.html
# POST_0053 = $(PODIR)/post-0053-regexpr-in-practice.html
POST_0052 = $(PODIR)/post-0052-men-and-women.html
POST_0051 = $(PODIR)/post-0051-spatial-gis.html

POST_0050 = $(PODIR)/post-0050-gis-overall.html
POST_0049 = $(PODIR)/post-0049-imocap.html
POST_0048 = $(PODIR)/post-0048-low-poly-in-practice.html
POST_0047 = $(PODIR)/post-0047-more-about-vim.html
POST_0046 = $(PODIR)/post-0046-awk.html
POST_0045 = $(PODIR)/post-0045-learning-vim.html
POST_0044 = $(PODIR)/post-0044-git-github-notes.html
POST_0043 = $(PODIR)/post-0043-awesome-c.html
POST_0042 = $(PODIR)/post-0042-rules-and-logic.html
POST_0041 = $(PODIR)/post-0041-lists-read-at-random.html

POST_0040 = $(PODIR)/post-0040-shell-is-kidding-me.html
POST_0039 = $(PODIR)/post-0039-newton-method.html
POST_0038 = $(PODIR)/post-0038-salute-to-big-fish.html
POST_0037 = $(PODIR)/post-0037-pangu.html
POST_0036 = $(PODIR)/post-0036-clipboard.html
POST_0035 = $(PODIR)/post-0035-pkg-config.html
POST_0034 = $(PODIR)/post-0034-github-dmca.html
POST_0033 = $(PODIR)/post-0033-md2docx.html
POST_0032 = $(PODIR)/post-0032-dvorak.html
POST_0031 = $(PODIR)/post-0031-brain-hole.html

POST_0030 = $(PODIR)/post-0030-fucking-day.html
POST_0029 = $(PODIR)/post-0029-kl-transform.html
POST_0028 = $(PODIR)/post-0028-pinboard.html
POST_0027 = $(PODIR)/post-0027-ai-will-kill-us.html
POST_0026 = $(PODIR)/post-0026-english-or-chinese.html
POST_0025 = $(PODIR)/post-0025-doc-bridge-texture.html
POST_0024 = $(PODIR)/post-0024-linux-shell-scripting-cookbook.html
POST_0023 = $(PODIR)/post-0023-learning-html5.html
POST_0022 = $(PODIR)/post-0022-learning-html.html
POST_0021 = $(PODIR)/post-0021-wikileaks.html

POST_0020 = $(PODIR)/post-0020-kaoyan-english.html
POST_0019 = $(PODIR)/post-0019-opencv-computer-vision-with-python.html
POST_0018 = $(PODIR)/post-0018-spatial-analysis.html
POST_0017 = $(PODIR)/post-0017-wikipedia-japan.html
POST_0016 = $(PODIR)/post-0016-wikipedia-china.html
POST_0015 = $(PODIR)/post-0015-jacobian-and-determinant.html
POST_0014 = $(PODIR)/post-0014-free-as-in-freedom.html
POST_0013 = $(PODIR)/post-0013-duckduckgo-another-search-engine.html
POST_0012 = $(PODIR)/post-0012-awk.html
POST_0011 = $(PODIR)/post-0011-academic-integrity-at-princeton.html

POST_0010 = $(PODIR)/post-0010-as-an-it-bird.html
POST_0009 = $(PODIR)/post-0009-ascii-art.html
POST_0008 = $(PODIR)/post-0008-argc-argv-in-c.html
POST_0007 = $(PODIR)/post-0007-windows-configurations.html
POST_0006 = $(PODIR)/post-0006-why-emacs-users-favor-dvorak.html
POST_0005 = $(PODIR)/post-0005-tao-of-programming.html
POST_0004 = $(PODIR)/post-0004-gphoto2.html
POST_0003 = $(PODIR)/post-0003-debian-configurations.html
POST_0002 = $(PODIR)/post-0002-how-to-make-this-blog.html
POST_0001 = $(PODIR)/post-0001-pandoc-readme.html

POSTS = \
$(POST_0090) $(POST_0089) $(POST_0088) $(POST_0087) $(POST_0086) $(POST_0085) $(POST_0084) $(POST_0083) $(POST_0082) $(POST_0081) \
$(POST_0080) $(POST_0079) $(POST_0078) $(POST_0077) $(POST_0076) $(POST_0075) $(POST_0074) $(POST_0073) $(POST_0072) $(POST_0071) \
$(POST_0070) $(POST_0069) $(POST_0068) $(POST_0067) $(POST_0066) $(POST_0065) $(POST_0064) $(POST_0063) $(POST_0062) $(POST_0061) \
$(POST_0060) $(POST_0059) $(POST_0058) $(POST_0057) $(POST_0056) $(POST_0055) $(POST_0054) $(POST_0053) $(POST_0052) $(POST_0051) \
$(POST_0050) $(POST_0049) $(POST_0048) $(POST_0047) $(POST_0046) $(POST_0045) $(POST_0044) $(POST_0043) $(POST_0042) $(POST_0041) \
$(POST_0040) $(POST_0039) $(POST_0038) $(POST_0037) $(POST_0036) $(POST_0035) $(POST_0034) $(POST_0033) $(POST_0032) $(POST_0031) \
$(POST_0030) $(POST_0029) $(POST_0028) $(POST_0027) $(POST_0026) $(POST_0025) $(POST_0024) $(POST_0023) $(POST_0022) $(POST_0021) \
$(POST_0020) $(POST_0019) $(POST_0018) $(POST_0017) $(POST_0016) $(POST_0015) $(POST_0014) $(POST_0013) $(POST_0012) $(POST_0011) \
$(POST_0010) $(POST_0009) $(POST_0008) $(POST_0007) $(POST_0006) $(POST_0005) $(POST_0004) $(POST_0003) $(POST_0002) $(POST_0001)

SOME_POSTS = \
$(POST_0049) $(POST_0047) $(POST_0046) $(POST_0042) $(POST_0035) $(POST_0029) $(POST_0028) $(POST_0023) $(POST_0024) $(POST_0022) \
$(POST_0014) $(POST_0013) $(POST_0010) $(POST_0004) $(POST_0001) 

PDFS = $(patsubst %.html, %.pdf, $(SOME_POSTS))

# all: $(POSTS) $(IDXPG)
all: $(POSTS) index index2

index: $(IDXPG)
$(IDXPG): $(IDXMD)
$(IDXPG): $(POSTS)
	$(IDX) $@ $(POSTS)

index2: $(IDXPG2)
$(IDXPG2): $(IDXMD)
	$(IDX2) $@

clean:
	rm -f $(POSTS) $(IDXPG)

$(PODIR)/post-0051-spatial-gis.html: $(PIDIR)/post-0051-spatial-gis.md
	$(BIB) $^ $@ &
$(PODIR)/post-0050-gis-overall.html: $(PIDIR)/post-0050-gis-overall.md
	$(BIB) $^ $@ &

pdf: $(PDFS)
$(PODIR)/%.html: $(PIDIR)/%.md
	cat $^ | $(GEN) $@ &

$(PODIR)/%.pdf: $(PIDIR)/%.md
	pandoc --latex-engine=xelatex -V mainfont="Microsoft YaHei" -f markdown --template=_pm-template $^ -o $@ &

p: post
post:
	$(EDITOR) $(firstword $(CURFILES))

hdr: header
header:
	$(EDITOR) $(firstword $(IDXMD))

m: make
make:
	$(EDITOR) Makefile
